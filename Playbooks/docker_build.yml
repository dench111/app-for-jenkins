  
- hosts: servers
  gather_facts: false
  tasks:
    - maven_artifact:
        group_id: repositories
        artifact_id: Testrep
        repository_url: 'http://192.168.0.84:8081/nexus/service/local/repositories/Testrep/content/'
        username: admin
        password: admin123
        dest: /tmp/workspace/sources/MySpringBootTestApp-72.jar
    - name: App | Cloning app sources
      git: repo=git@github.com:dench111/rest-service.git
           dest=/tmp/workspace/sources/
           accept_hostkey=yes
           force=yes
           recursive=no
           key_file=/home/root/.ssh/id_rsa.pub
    - name: Cloning config files
      git: repo=git@github.com:dench111/app-for-jenkins.git
           dest=/tmp/workspace/configs/
           accept_hostkey=yes
           force=yes
           recursive=no
           key_file=/home/root/.ssh/id_rsa.pub
    - name: Build docker image
      shell:
        cmd: docker build --tag testimage:v1 /tmp/workspace/configs/
